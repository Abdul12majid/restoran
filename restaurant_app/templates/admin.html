<!doctype html>
{% load static %}
<html lang="en">

	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Meta -->
		<meta name="description" content="Reserve-rite">
		<meta name="author" content="Bootstrap Gallery" />
		<link rel="canonical" href="https://www.bootstrap.gallery/">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<meta property="og:url" content="https://www.bootstrap.gallery">
		<meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
		<meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
		<meta property="og:type" content="Website">
		<meta property="og:site_name" content="Bootstrap Gallery">
		<link rel="shortcut icon" href="{% static 'rite/images/favicon.svg' %}">

		<!-- Title -->
		<title>Reserve Rite</title>


		<!-- *************
			************ Common Css Files *************
		************ -->

		<!-- Animated css -->
		<link rel="stylesheet" href="{% static 'rite/css/animate.css' %}">

		<!-- Bootstrap font icons css -->
		<link rel="stylesheet" href="{% static 'rite/fonts/bootstrap/bootstrap-icons.css' %}">

		<!-- Main css -->
		<link rel="stylesheet" href="{% static 'rite/css/main.min.css' %}">


		<!-- *************
			************ Vendor Css Files *************
		************ -->

		<!-- Scrollbar CSS -->
		<link rel="stylesheet" href="{% static 'rite/vendor/overlay-scroll/OverlayScrollbars.min.css' %}">

	</head>

	<body>

		<!-- Page wrapper start -->
		<div class="page-wrapper">

			<!-- Sidebar wrapper start -->
			<nav class="sidebar-wrapper">

				<!-- Sidebar brand starts -->
				<div class="sidebar-brand">
					<a href="{% url 'reserve_index' %}" class="logo">
						<img src="{% static 'rite/images/logo.svg' %}" alt="Reserve-rite" />
					</a>
				</div>
				<!-- Sidebar brand starts -->

				<!-- Sidebar menu starts -->
				<div class="sidebar-menu">
					<div class="sidebarMenuScroll">
						<ul>
							<li class="sidebar-dropdown active">
								<a href="{% url 'reserve_index' %}">
									<i class="bi bi-house"></i>
									<span class="menu-text">Dashboard</span>
								</a>
								<div class="sidebar-submenu">
									<ul>
										<li>
											<a href="{% url 'profile' %}" class="current-page">Profile</a>
										</li>
										<li>
											<a href="{% url 'all_reservations' %}">Reservations</a>
										</li>
									</ul>
								</div>
							</li>
							
							<li class="sidebar-dropdown">
								<a href="#">
									<i class="bi bi-gem"></i>
									<span class="menu-text">Tables</span>
								</a>
								<div class="sidebar-submenu">
									<ul>
										<li>
											<a href="{% url 'tables' %}">Tables</a>
										</li>
										<li>
											<a href="{% url 'contact' %}">Contact</a>
										</li>
									</ul>
								</div>
							</li>
							
						</ul>
					</div>
				</div>
				<!-- Sidebar menu ends -->

			</nav>
			<!-- Sidebar wrapper end -->

				<div class="modal modal-dark fade" id="viewRow" tabindex="-1" aria-labelledby="viewRowLabel"
					style="display: none;" aria-hidden="true">
					<div class="modal-dialog modal-lg modal-dialog-centered">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="viewRowLabel">View Details</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<div class="modal-body">

								<!-- Row start -->
								<div class="row">
									
								</div>
								<!-- Row end -->

							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
							</div>
						</div>
					</div>
				</div>

			<!-- *************
				************ Main container start *************
			************* -->
			<div class="main-container">

				<!-- Page header starts -->
				<div class="page-header">

					<div class="toggle-sidebar" id="toggle-sidebar"><i class="bi bi-list"></i></div>

					<!-- Breadcrumb start -->
					<ol class="breadcrumb">
						<li class="breadcrumb-item">
							<i class="bi bi-house"></i>
							<a href="{% url 'reserve_index' %}">Home</a>
						</li>
						<li class="breadcrumb-item breadcrumb-active" aria-current="page">Admin Page</li>
					</ol>
					<!-- Breadcrumb end -->

					<!-- Header actions ccontainer start -->
					<div class="header-actions-container">

						<!-- Search container start -->
						<div class="search-container">

							<!-- Search input group start -->
							<div class="input-group">
								<h5>{{ user.username }}</h5>
							</div>
							<!-- Search input group end -->

						</div>
						<!-- Search container end -->

						

						<!-- Header actions start -->
						<ul class="header-actions">
							<li class="dropdown d-none d-md-block">
								
								<div class="dropdown-menu dropdown-menu-end mini" aria-labelledby="countries">
									<div class="country-container">
										<a href="index.html">
											<img src="assets/images/flags/1x1/us.svg" alt="Clean Admin Dashboards" />
										</a>
										<a href="index.html">
											<img src="{% static 'rite/images/flags/1x1/in.svg' %}" alt="Google Dashboards" />
										</a>
										<a href="index.html">
											<img src="assets/images/flags/1x1/gb.svg" alt="AI Admin Dashboards" />
										</a>
										<a href="index.html">
											<img src="assets/images/flags/1x1/tr.svg" alt="Modern Dashboards" />
										</a>
										<a href="index.html">
											<img src="{% static 'rite/images/flags/1x1/ca.svg' %}" alt="Best Admin Dashboards" />
										</a>
									</div>
								</div>
							</li>
							<li class="dropdown">
								<a href="#" id="userSettings" class="user-settings" data-toggle="dropdown" aria-haspopup="true">
									<span class="user-name d-none d-md-block">Admin</span>
								
								</a>
								<div class="dropdown-menu dropdown-menu-end" aria-labelledby="userSettings">
									<div class="header-profile-actions">
										<a href="{% url 'reserve_index' %}">Profile</a>
										<a href="{% url 'profile' %}">Settings</a>
										<a href="{% url 'logout-user' %}">Logout</a>
									</div>
								</div>
							</li>
						</ul>
						<!-- Header actions end -->

					</div>
					<!-- Header actions ccontainer end -->

				</div>
				<!-- Page header ends -->

				<!-- Content wrapper scroll start -->
				<div class="container">
		        {% if messages %}
		        {% for message in messages %}

		        <div class="alert alert-primary alert-dismissible fade show" role="alert">
		            {{ message }}
		        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		         
		        </div>
		        {% endfor %}
		        {% endif %}
		        </div></br>
				<div class="content-wrapper-scroll">

					<!-- Content wrapper start -->
					<div class="content-wrapper">

						<!-- Row start -->
						<div class="row">
							
							<div class="table-responsive">
								<table class="table v-middle m-0">
									<thead>
										<tr>
											<th>Name</th>
											<th>Date</th>
											<th>Time</th>
											<th>Status</th>
											<th>No. of guests</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody>
										{% for booking in bookings %}
										<tr>
											<td>{{ booking.name }}</td>
											<td>{{ booking.date }}</td>
											<td>{{ booking.time }}</td>
											{% if booking.status.name == "Pending" %}
										      <td><span class="badge shade-blue min-90">Processing</span></td>
										      {% elif booking.status.name == "Approved" %}
										      <td><span class="badge shade-green min-90">Approved</span></td>
										      {% elif booking.status.name == "Cancelled" %}
										      <td><span class="badge shade-red min-90">Cancelled</span></td>
										    {% endif %}

										    <td>{{ booking.guests }}</td>

										    {% if booking.status.name == "Pending" %}
									      <td><a href="{% url 'approve_email' booking.id %}" class="btn btn-outline-primary btn-sm">Approve</a>&nbsp; <a href="{% url 'details' booking.id %}" class="btn btn-outline-primary btn-sm">view</a>&nbsp; <a href="{% url 'cancel' booking.id %}" class="btn btn-outline-danger btn-sm">Cancel</a></td>
									      {% elif booking.status.name == "Approved" %}
									      <td><a href="{% url 'details' booking.id %}" class="btn btn-outline-success btn-sm">View</a>&nbsp;</td>
									      {% elif booking.status.name == "Cancelled" %}
									      <td><a href="{% url 'details' booking.id %}" class="btn btn-outline-secondary btn-sm">View</a></td>
									      {% endif %}
										</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
						</div>
						<!-- Row end -->

						<!-- Row start -->
						</br></br>
						<div class="row">
							
						</div>
						<!-- Row end -->

						<!-- Row start -->

						<div class="row">
							<div class="col-xxl-6 col-sm-8 col-12">
								<div class="card">
									<div class="card-header">
										<div class="card-title">User Info</div>
									</div>
									<div class="card-body">
										<table class="table table-striped">
											  <thead>
											    <tr>
											      <th scope="col">#</th>
											      <th scope="col">First Name</th>
											      <th scope="col">Last Name</th>
											      <th scope="col">Email</th>
											    </tr>
											  </thead>
											  <tbody>
											  	{% for user in users %}
											    <tr>
											      <th scope="row">{{ forloop.counter }}</th>
											      <td>{{ user.username}}</td>
											      <td>{{ user.last_name }}</td>
											      <td>{{ user.email }}</td>
											    </tr>
											    {% endfor %}
											    
											</table>
									</div>
								</div>
							</div>
							
							<div class="col-xxl-4 col-sm-12 col-12">
								<div class="card">
									<div class="card-header">
										<div class="card-title">Available Table</div>
									</div>
									<div class="card-body">

										{% for table in tables %}
										<p>{{ table.name }}</p>
										{% endfor %}

									</div>
								</div>
							</div>
						</div>
						<!-- Row end -->

						<!-- Row start -->
						</br>
						<div class="row">
							
							<div class="col-sm-12 col-12">

								<!-- Card start -->
								<div class="card">
									<div class="card-header">
										<div class="card-title">Make Reservation</div>
									</div>
									<div class="card-body">
										<form method="POST" action="{% url 'book_home_table' %}" validate>
											{%csrf_token%}

										<!-- Row start -->
										<div class="row">
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputName" class="form-label">Name</label>
													<input value="{{ user.username }}" type="text" class="form-control" id="inputName" placeholder="Enter Name" readonly>
												</div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputEmail" class="form-label">Email</label>
													<input value="{{ user.email }}" type="email" class="form-control" id="inputEmail" placeholder="Enter Email" readonly>
												</div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputNumber" class="form-label">Phone</label>
													<input value="{{ user.profile.contact }}" type="number" class="form-control" id="inputNumber" placeholder="Enter Phone Number" readonly>
												</div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputNumber" class="form-label">Table</label>
													<select placeholder='select table' name="table" id="time" class="form-control">
								                      {% for table in tables %}
								                    <option value="{{ table.id }}">
								                        {{ table.name }} 
								                        
								                    </option>
								                      {% endfor %}
								                    </select required>
								                 </div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputNumber" class="form-label">Guests</label>
													<input name="guests" type="number" class="form-control" id="inputNumber" placeholder='Number of guests'>
												</div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputCompanyName" class="form-label">Date</label>
													<input name="date" type="date" class="form-control" id="inputCompanyName"
														placeholder="Date">
												</div>
											</div>
											<div class="col-xl-3 col-sm-4 col-12">
												<div class="mb-3">
													<label for="inputCompanyName" class="form-label">Time</label>
													<input name="time" type="time" class="form-control" id="inputCompanyName"
														placeholder="Time">
												</div>
											</div>
											
											<div class="col-sm-6 col-12">
												<div class="mb-3">
													<label for="inputMessage" class="form-label">Message</label>
													<textarea name="message" class="form-control" id="inputMessage" placeholder="Enter Message"
														rows="3"></textarea>
												</div>
											</div>
										</div>
										<!-- Row end -->

										<!-- Form actions footer start -->
										<div class="form-actions-footer">
											<button class="btn btn-light">Cancel</button>
											<button type="Submit" class="btn btn-success">Submit</button>
										</div>

										</form>
										<!-- Form actions footer end -->

									</div>
								</div>
								<!-- Card end -->

							</div>
						</div>
						<!-- Row end -->

					</div>
					<!-- Content wrapper end -->

					<!-- App Footer start -->
					<div class="app-footer">
						<span>© Reserve Rite</span>
					</div>
					<!-- App footer end -->

				</div>
				<!-- Content wrapper scroll end -->

			</div>
			<!-- *************
				************ Main container end *************
			************* -->

		</div>
		<!-- Page wrapper end -->

		<!-- *************
			************ Required JavaScript Files *************
		************* -->
		<!-- Required jQuery first, then Bootstrap Bundle JS -->
		<script type="text/javascript">
			$(document).ready(function() {
			    $('.viewRow').click(function(event) {
			        event.preventDefault(); // Prevent default link behavior (following a page)

			        // Get the booking ID from the element's data attribute (assuming it has one)
			        var bookingId = $(this).data('booking-id');

			        // Send an AJAX request to retrieve booking details
			        $.ajax({
			            url: '/get-booking-details/' + bookingId + '/',  // Replace with your actual view URL
			            type: 'GET',
			            success: function(response) {
			                // Update the modal content with the received details (see step 2)
			            },
			            error: function(error) {
			                console.error('Error fetching booking details:', error);
			                // Optionally, display an error message to the user
			            }
			        });
			    });
			});

		</script>
		<script src="{% static 'rite/js/jquery.min.js' %}"></script>
		<script src="{% static 'rite/js/bootstrap.bundle.min.js' %}"></script>
		<script src="{% static 'rite/js/modernizr.js' %}"></script>
		<script src="{% static 'rite/js/moment.js' %}"></script>

		<!-- *************
			************ Vendor Js Files *************
		************* -->

		<!-- Overlay Scroll JS -->
		<script src="{% static 'rite/vendor/overlay-scroll/jquery.overlayScrollbars.min.js' %}"></script>
		<script src="{% static 'rite/vendor/overlay-scroll/custom-scrollbar.js' %}"></script>

		<!-- Apex Charts -->
		<script src="{% static 'rite/vendor/apex/apexcharts.min.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/byChannel.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/byCountry.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/byDevice.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/orders.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/results.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/visitors.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/demography.js' %}"></script>
		<script src="{% static 'rite/vendor/apex/custom/analytics/deals.js' %}"></script>

		<!-- Vector Maps -->
		<script src="{% static 'rite/vendor/jvectormap/jquery-jvectormap-2.0.5.min.js' %}"></script>
		<script src="{% static 'rite/vendor/jvectormap/world-mill-en.js' %}"></script>
		<script src="{% static 'rite/vendor/jvectormap/gdp-data.js' %}"></script>
		<script src="{% static 'rite/vendor/jvectormap/custom/world-map-markers.js' %}"></script>

		<!-- Circleful -->
		<script src="{% static 'rite/vendor/circliful/circliful.min.js' %}"></script>
		<script src="{% static 'rite/vendor/circliful/circliful.custom.js' %}"></script>

		<!-- Main Js Required -->
		<script src="{% static 'rite/js/main.js' %}"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

	</body>

</html>